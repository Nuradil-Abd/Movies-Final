<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Выбор фильма и сеансов</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--</head>-->
<!--<body>-->

<!--<div class="container mt-5">-->
<!--    <h2>Выберите фильм</h2>-->

<!--    &lt;!&ndash; Выпадающий список для выбора фильма &ndash;&gt;-->
<!--    <select id="movieSelect" class="form-select mb-3">-->
<!--        <option value="" selected>Выберите фильм</option>-->
<!--        <option th:each="movie : ${movies}" th:value="${movie.id}" th:text="${movie.movieName}">Фильм</option>-->
<!--    </select>-->

<!--    &lt;!&ndash; Контейнер для отображения залов и сеансов выбранного фильма &ndash;&gt;-->
<!--    <div id="showTimesContainer">-->
<!--        <h3 th:if="${selectedMovie != null}" th:text="${selectedMovie.movieName}"></h3>-->

<!--        <div th:each="hall : ${halls}" class="mt-4">-->
<!--            <h4 th:text="${hall.name}">Название зала</h4>-->
<!--            <div th:each="showTime : ${hall.showTimes}">-->
<!--                <p>Время сеанса: <span th:text="${showTime.startTime}">Время</span></p>-->
<!--                <p>Цена: <span th:text="${showTime.price}">Цена</span></p>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    $(document).ready(function () {-->
<!--        $('#movieSelect').change(function () {-->
<!--            const movieId = $(this).val();-->

<!--            if (movieId) {-->
<!--                $.ajax({-->
<!--                    url: '/cinemas/showTimes',-->
<!--                    type: 'GET',-->
<!--                    data: {movieId: movieId},-->
<!--                    success: function (response) {-->
<!--                        $('#showTimesContainer').html(response);-->
<!--                    },-->
<!--                    error: function () {-->
<!--                        alert('Произошла ошибка при загрузке данных.');-->
<!--                    }-->
<!--                });-->
<!--            } else {-->
<!--                $('#showTimesContainer').empty();-->
<!--            }-->
<!--        });-->
<!--    });-->
<!--</script>-->

<!--</body>-->
<!--</html>-->

<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Кинотеатр: ${cinema.name}</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--</head>-->
<!--<body>-->

<!--<div class="container mt-5">-->
<!--    <h2>Кинотеатр: ${cinema.name}</h2>-->

<!--    <h3>Выберите фильм:</h3>-->
<!--    <select id="movieSelect" class="form-select mb-3">-->
<!--        <option value="" selected>Выберите фильм</option>-->
<!--        <option th:each="movie : ${movies}" th:value="${movie.id}" th:text="${movie.movieName}"></option>-->
<!--    </select>-->


<!--    <div id="showTimesContainer"></div>-->
<!--</div>-->

<!--<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--<script>-->
<!--    $(document).ready(function () {-->
<!--        $('#movieSelect').change(function () {-->
<!--            const movieId = $(this).val();-->

<!--            if (movieId) {-->
<!--                $.ajax({-->
<!--                    url: '/cinemas/showTimes',-->
<!--                    type: 'GET',-->
<!--                    data: { movieId: movieId },-->
<!--                    success: function (response) {-->
<!--                        $('#showTimesContainer').html(response);-->
<!--                    },-->
<!--                    error: function () {-->
<!--                        alert('Произошла ошибка при загрузке данных.');-->
<!--                    }-->
<!--                });-->
<!--            } else {-->
<!--                $('#showTimesContainer').empty();-->
<!--            }-->
<!--        });-->
<!--    });-->
<!--</script>-->

<!--</body>-->
<!--</html>-->




<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Кинотеатры и расписание</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--</head>-->
<!--<body>-->


<!--&lt;!&ndash; Раздел для управления фильмами &ndash;&gt;-->
<!--<section>-->
<!--    <h3>Управление фильмами</h3>-->
<!--    <table class="table table-hover table-striped">-->
<!--        <thead class="table-dark">-->
<!--        <tr>-->
<!--            <th>ID</th>-->
<!--            <th>Изображение</th>-->
<!--            <th>Название</th>-->
<!--            <th>cians </th>-->
<!--            <th>Жанр</th>-->
<!--            <th>Длительность</th>-->
<!--            <th>Возрастной рейтинг</th>-->
<!--            <th>Дата выхода</th>-->
<!--            <th>Трейлер</th>-->
<!--            <th>Дополнительная информация</th>-->

<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        <tr th:each="movie : ${movies}" data-bs-toggle="tooltip" title="Наведите курсор для подробной информации">-->
<!--        <tr th:each="movie : ${movies}">-->
<!--        <tr th:each=" : ${}">-->
<!--            <td th:text="${movie.id}"></td>-->
<!--            <td><img th:src="${movie.image}" alt="Изображение фильма"-->
<!--                     style="width: 100px; height: 150px; object-fit: cover;"></td>-->
<!--            <td th:text="${movie.movieName}"></td>-->
<!--            <td th:text="${movie.genre}"></td>-->
<!--            <td th:text="${movie.duration}+ ' мин' "></td>-->
<!--            <td th:text="${movie.ageRating} + '+'"></td>-->
<!--            <td th:text="${movie.releaseDate}"></td>-->
<!--            <td th:text="${movie.trailerUrl}"></td>-->

<!--            <td>-->
<!--                <strong>Режиссер:</strong> <span th:text="${movie.movieInfo.director}"></span><br>-->
<!--                <strong>Главные актеры:</strong> <span th:text="${movie.movieInfo.actor}"></span><br>-->
<!--                <strong>Страна:</strong> <span th:text="${movie.movieInfo.country}"></span><br>-->
<!--                <strong>Язык:</strong> <span th:text="${movie.movieInfo.language}"></span><br>-->
<!--                &lt;!&ndash;                    <strong>Описание:</strong> <span th:text="${movie.movieInfo.description}"></span>&ndash;&gt;-->
<!--            </td>-->

<!--            &lt;!&ndash;            <tr class="info-row" style="display: none;">&ndash;&gt;-->
<!--            &lt;!&ndash;            </tr>&ndash;&gt;-->
<!--        </tr>-->
<!--        &lt;!&ndash; Скрытая строка с подробной информацией о фильме &ndash;&gt;-->


<!--        </tbody>-->
<!--    </table>-->
<!--</section>-->


<!--<div class="container mt-5">-->
<!--    <h2>Выберите кинотеатр:</h2>-->
<!--    <select id="cinemaSelect" class="form-select mb-3">-->
<!--        <option value="" selected>Выберите кинотеатр</option>-->
<!--        <option th:each="cinema : ${cinemas}" th:value="${cinema.id}" th:text="${cinema.name}"></option>-->
<!--    </select>-->

<!--    <h3>Выберите фильм:</h3>-->
<!--    <select id="movieSelect" class="form-select mb-3" disabled>-->
<!--        <option value="" selected>Выберите фильм</option>-->
<!--    </select>-->

<!--    <div id="showTimesContainer"></div>-->
<!--</div>-->

<!--<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
<!--<script>-->
<!--    $(document).ready(function () {-->
<!--        // Когда выбран кинотеатр-->
<!--        $('#cinemaSelect').change(function () {-->
<!--            const cinemaId = $(this).val();-->

<!--            if (cinemaId) {-->
<!--                $.ajax({-->
<!--                    url: '/cinemas/movies',-->
<!--                    type: 'GET',-->
<!--                    data: { cinemaId: cinemaId },-->
<!--                    success: function (response) {-->
<!--                        const movieSelect = $('#movieSelect');-->
<!--                        movieSelect.empty().append('<option value="" selected>Выберите фильм</option>');-->

<!--                        // Заполняем фильмы, связанные с выбранным кинотеатром-->
<!--                        response.forEach(movie => {-->
<!--                            movieSelect.append(`<option value="${movie.id}">${movie.movieName}</option>`);-->
<!--                        });-->

<!--                        movieSelect.prop('disabled', false); // Делаем поле выбора фильма активным-->
<!--                        $('#showTimesContainer').empty(); // Очищаем сеансы-->
<!--                    },-->
<!--                    error: function () {-->
<!--                        alert('Ошибка при загрузке фильмов.');-->
<!--                    }-->
<!--                });-->
<!--            } else {-->
<!--                $('#movieSelect').prop('disabled', true).empty().append('<option value="" selected>Выберите фильм</option>');-->
<!--                $('#showTimesContainer').empty();-->
<!--            }-->
<!--        });-->

<!--        // Когда выбран фильм-->
<!--        $('#movieSelect').change(function () {-->
<!--            const movieId = $(this).val();-->
<!--            const cinemaId = $('#cinemaSelect').val();-->

<!--            if (movieId && cinemaId) {-->
<!--                $.ajax({-->
<!--                    url: '/cinemas/showTimes',-->
<!--                    type: 'GET',-->
<!--                    data: { movieId: movieId, cinemaId: cinemaId },-->
<!--                    success: function (response) {-->
<!--                        $('#showTimesContainer').html(response);-->
<!--                    },-->
<!--                    error: function () {-->
<!--                        alert('Ошибка при загрузке расписания.');-->
<!--                    }-->
<!--                });-->
<!--            } else {-->
<!--                $('#showTimesContainer').empty();-->
<!--            }-->
<!--        });-->
<!--    });-->
<!--</script>-->

<!--</body>-->
<!--</html>-->

<!--не удаляй пока не реализуешь HTML-->

<!--<div class="container">-->
<!--    <h2>Кинотеатр: <span th:text="${cinema.name}"></span></h2>-->

<!--    <div th:each="movie : ${movies}">-->
<!--        <h3>Фильм: <span th:text="${movie.movieName}"></span></h3>-->

<!--        <p>Жанр: <span th:text="${movie.genre}"></span></p>-->
<!--        <p>Продолжительность: <span th:text="${movie.duration}"></span> мин.</p>-->

<!--        <h4>Залы:</h4>-->
<!--        <ul>-->
<!--            <li th:each="hall : ${movieHallsMap[movie]}" th:text="${hall.name}"></li>-->
<!--        </ul>-->
<!--    </div>-->
<!--</div>-->


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Кинотеатр: [[${cinema.name}]]</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5">
    <h1 class="mb-4">Кинотеатр: <span th:text="${cinema.name}"></span></h1>

    <!-- Фильмы -->
    <h2>Фильмы</h2>
    <div class="accordion" id="moviesAccordion">
        <div th:each="movie : ${movies}">
            <div class="accordion-item">
                <h2 class="accordion-header" id="heading-[[${movie.id}]]">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-[[${movie.id}]]" aria-expanded="false" aria-controls="collapse-[[${movie.id}]]">
                        <span th:text="${movie.movieName}"></span> — <small th:text="${movie.genre}"></small>
                    </button>
                </h2>
                <div id="collapse-[[${movie.id}]]" class="accordion-collapse collapse" aria-labelledby="heading-[[${movie.id}]]" data-bs-parent="#moviesAccordion">
                    <div class="accordion-body">
                        <!-- Залы и сеансы -->
                        <div th:if="${movieHallsMap[movie] != null}">
                            <h5>Залы и сеансы:</h5>
                            <ul class="list-group">
                                <li class="list-group-item" th:each="hall : ${movieHallsMap[movie]}">
                                    <strong>Зал:</strong> <span th:text="${hall.name}"></span>
                                    <ul>
                                        <li th:each="showTime : ${hall.showTimes}">
                                            <strong>Время:</strong> <span th:text="${showTime.startTime}"></span>,
                                            <strong>Цена:</strong> <span th:text="${showTime.price}"></span> сом.
                                            <a class="btn btn-sm btn-primary ms-2" th:href="@{/ticketManagement?showTimeId=${showTime.id}}">Выбрать места</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <div th:if="${movieHallsMap[movie] == null}">
                            <p>Нет доступных сеансов для этого фильма.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Кнопка назад -->
    <a href="/cinemas" class="btn btn-secondary mt-4">Вернуться к списку кинотеатров</a>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
